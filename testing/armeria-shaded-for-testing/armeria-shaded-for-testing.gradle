plugins {
  id "com.github.johnrengelman.shadow"
}

apply from: "$rootDir/gradle/java.gradle"

dependencies {
  implementation project(":instrumentation:armeria-1.3:library")
  implementation "com.linecorp.armeria:armeria-junit5:1.3.0"
}

shadowJar {
  // Ensures tests are not affected by Armeria instrumentation
  relocate "com.linecorp.armeria", "io.opentelemetry.testing.armeria"
  relocate "io.opentelemetry.instrumentation.armeria", "io.opentelemetry.testing.instrumentation.armeria"
  // Allows tests of Netty instrumentations which would otherwise conflict.
  relocate "io.netty", "io.opentelemetry.testing.netty"
}
